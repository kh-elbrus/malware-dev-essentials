import sys

KEY = b"<YOUR-SUPER-SECRET-KEY>"

def xor(data, key):
    l = len(key)
    output_bytes = bytearray(len(data))

    for i in range(len(data)):
        current = data[i]
        current_key = key[i % l]
        output_bytes[i] = current ^ current_key

    return bytes(output_bytes)

def printCiphertext(ciphertext):
    print('{ 0x' + ', 0x'.join(hex(x)[2:] for x in ciphertext) + ' };')

try:
    plaintext = open(sys.argv[1], "rb").read()
except:
    print("File argument needed! %s <raw payload file>" % sys.argv[0])
    sys.exit()

ciphertext = xor(plaintext, KEY)
open("fevicon.ico", "wb").write(ciphertext)
printCiphertext(ciphertext)